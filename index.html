<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>PewPi Â· Infinity Portal</title>
  <meta name="color-scheme" content="dark"/>
  <style>
    /* === all your original Infinity-Vectors CSS === */
    :root {
      --bg: radial-gradient(circle at top,#030816 0%,#01030a 45%,#000 100%);
      --panel: rgba(2,11,25,.75);
      --line: #12b5ff;
      --accent:#5f6fff;
      --muted:#94a3b8;
      --text:#dbeafe;
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Ubuntu,sans-serif;
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);min-height:100vh;color:var(--text)}
    .hidden{display:none!important}
    /* â€¦ all your login, dashboard, and admin styling from before â€¦ */
  </style>
</head>
<body>
<!-- === Infinity Portal markup exactly as before === -->
<section id="loginScreen">â€¦</section>
<section id="dashboard" class="hidden">â€¦</section>

<!-- === Rogers floating panel === -->
<div id="rogersPanel" style="position:fixed;bottom:20px;right:20px;width:340px;background:rgba(1,9,18,.95);border:1px solid rgba(18,181,255,.3);border-radius:16px;padding:10px 12px;color:#e0f2fe;font-size:14px;z-index:9999;display:none;">
  <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px;">
    <strong>ðŸŽ™ Rogers AI</strong>
    <button id="rogersClose" style="background:none;border:none;color:#38bdf8;font-size:18px;cursor:pointer;">Ã—</button>
  </div>
  <div id="rogersOut" style="max-height:160px;overflow-y:auto;margin-bottom:6px;font-size:13.5px;color:#cbd5e1;"></div>
  <textarea id="rogersIn" placeholder="Ask Infinityâ€¦" style="width:100%;border-radius:8px;padding:6px;font-size:13px;color:black;"></textarea>
  <button id="rogersSend" style="margin-top:6px;background:#38bdf8;border:none;color:white;padding:5px 10px;border-radius:8px;">Send</button>
</div>

<script>
/* === all your previous JS logic (users, login, dashboard, admin, etc.) === */
/* place this Rogers add-on at the very bottom so nothing breaks */

(async ()=>{
  const panel = document.getElementById('rogersPanel');
  const out   = document.getElementById('rogersOut');
  const input = document.getElementById('rogersIn');
  const close = document.getElementById('rogersClose');
  const sendB = document.getElementById('rogersSend');

  function toggle(show){ panel.style.display = show ? 'block':'none'; }
  close.onclick = ()=>toggle(false);
  document.addEventListener('keydown',e=>{
    if(e.altKey && e.key.toLowerCase()==='r')
      toggle(panel.style.display==='none');
  });

  async function send(msg){
    out.insertAdjacentHTML('beforeend',`<div><b>You:</b> ${msg}</div>`);
    input.value='';
    try{
      // call your local proxy (Flask) so key is hidden
      const r = await fetch("http://localhost:5000/genai",{
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({prompt:msg})
      });
      if(!r.ok){
        out.insertAdjacentHTML('beforeend',
          `<div style="color:#fca5a5;">HTTP ${r.status}</div>`);
        return;
      }
      const j = await r.json();
      const reply = j?.candidates?.[0]?.content?.parts?.[0]?.text || "(no reply)";
      out.insertAdjacentHTML('beforeend',
        `<div style="color:#93c5fd;"><b>Rogers:</b> ${reply}</div>`);
      out.scrollTop = out.scrollHeight;
      const u = new SpeechSynthesisUtterance(reply);
      u.voice = speechSynthesis.getVoices()[0];
      speechSynthesis.speak(u);
    }catch(e){
      out.insertAdjacentHTML('beforeend',
        `<div style="color:#fca5a5;">Error: ${e.message}</div>`);
    }
  }
  sendB.onclick = ()=>{ const m=input.value.trim(); if(m) send(m); };
})();
</script>
</body>
</html>
